<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<title>Catálogo com Cores e Tamanhos Visuais</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<style>
  body { font-family: Arial, sans-serif; margin: 20px; background:#f5f5f5; }
  h1 { text-align:center; }
  .produto { background:#fff; padding:15px; border-radius:8px; max-width: 600px; margin: 0 auto 30px; }
  .produto h2 { margin-top:0; }
  .cores, .tamanhos {
    margin: 10px 0;
    display: flex;
    gap: 10px;
  }
  .cor-quadrado, .tamanho-quadrado {
    cursor: pointer;
    border: 2px solid transparent;
    border-radius: 4px;
    user-select: none;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: bold;
    transition: border-color 0.3s;
  }
  .cor-quadrado {
    width: 30px;
    height: 30px;
  }
  .tamanho-quadrado {
    width: 35px;
    height: 35px;
    background: #eee;
    color: #333;
  }
  .cor-quadrado.selecionado, .tamanho-quadrado.selecionado {
    border-color: #007bff;
  }
  .cor-quadrado[data-cor="Branco"] {
    background: #fff;
    border: 1px solid #ccc;
  }
  .cor-quadrado[data-cor="Preto"] {
    background: #000;
  }
  .cor-quadrado[data-cor="Azul"] {
    background: #007bff;
  }
  .cor-quadrado[data-cor="Azul Claro"] {
    background: #66b0ff;
  }
  .cor-quadrado[data-cor="Azul Escuro"] {
    background: #004080;
  }
  #quantidade {
    width: 60px;
    padding: 5px;
    font-size: 16px;
    margin-left: 10px;
  }
  button {
    padding: 10px 15px;
    font-size: 16px;
    border: none;
    background: #007bff;
    color: white;
    border-radius: 5px;
    cursor: pointer;
    margin-top: 15px;
    transition: background-color 0.3s ease;
  }
  button:hover {
    background: #0056b3;
  }
  #msgErro {
    color: red;
    margin-top: 10px;
    min-height: 18px;
  }
</style>
</head>
<body>

<h1>Catálogo Online - Camiseta Básica</h1>

<div class="produto" data-codigo="CAM001" data-nome="Camiseta Básica" data-preco="50" data-estoque='{"Preto":["P","M","G"],"Branco":["P","M"],"Azul":["M","G","GG"]}'>
  <h2>Código: CAM001 - Camiseta Básica</h2>
  <p>Preço unitário: R$ 50,00</p>
  <p>Estoque disponível (por cor e tamanho):</p>
  <ul>
    <li>Preto: P, M, G</li>
    <li>Branco: P, M</li>
    <li>Azul: M, G, GG</li>
  </ul>

  <div>
    <strong>Selecione a Cor:</strong>
    <div class="cores">
      <div class="cor-quadrado" data-cor="Preto" title="Preto"></div>
      <div class="cor-quadrado" data-cor="Branco" title="Branco"></div>
      <div class="cor-quadrado" data-cor="Azul" title="Azul"></div>
    </div>
  </div>

  <div>
    <strong>Selecione o Tamanho:</strong>
    <div class="tamanhos">
      <!-- Tamanhos aparecerão aqui conforme cor -->
    </div>
  </div>

  <div style="margin-top:15px;">
    <label for="quantidade">Quantidade:</label>
    <input type="number" id="quantidade" min="1" value="1" />
  </div>

  <div id="msgErro"></div>

  <button id="btnAdicionar">Adicionar à lista</button>
</div>

<script>
  const produtoDiv = document.querySelector('.produto');
  const estoqueObj = JSON.parse(produtoDiv.dataset.estoque);
  const coresDiv = produtoDiv.querySelector('.cores');
  const tamanhosDiv = produtoDiv.querySelector('.tamanhos');
  const quantidadeInput = produtoDiv.querySelector('#quantidade');
  const msgErro = produtoDiv.querySelector('#msgErro');

  let corSelecionada = null;
  let tamanhoSelecionado = null;

  // Função para limpar seleção de cor
  function limparSelecaoCor() {
    coresDiv.querySelectorAll('.cor-quadrado').forEach(el => el.classList.remove('selecionado'));
  }
  // Função para limpar seleção de tamanho
  function limparSelecaoTam() {
    tamanhosDiv.querySelectorAll('.tamanho-quadrado').forEach(el => el.remove());
    tamanhoSelecionado = null;
  }

  // Criar tamanhos visíveis baseados na cor selecionada
  function mostrarTamanhos(cor) {
    limparSelecaoTam();
    if (!cor || !estoqueObj[cor]) return;

    estoqueObj[cor].forEach(tam => {
      const div = document.createElement('div');
      div.classList.add('tamanho-quadrado');
      div.textContent = tam;
      div.dataset.tamanho = tam;
      div.title = tam;

      div.addEventListener('click', () => {
        // Marcar seleção
        tamanhosDiv.querySelectorAll('.tamanho-quadrado').forEach(el => el.classList.remove('selecionado'));
        div.classList.add('selecionado');
        tamanhoSelecionado = tam;
        msgErro.textContent = '';
      });

      tamanhosDiv.appendChild(div);
    });
  }

  // Eventos cores
  coresDiv.querySelectorAll('.cor-quadrado').forEach(div => {
    div.addEventListener('click', () => {
      limparSelecaoCor();
      div.classList.add('selecionado');
      corSelecionada = div.dataset.cor;
      msgErro.textContent = '';
      mostrarTamanhos(corSelecionada);
    });
  });

  // Botão adicionar
  document.getElementById('btnAdicionar').addEventListener('click', () => {
    msgErro.textContent = '';

    if (!corSelecionada) {
      msgErro.textContent = 'Selecione uma cor.';
      return;
    }
    if (!tamanhoSelecionado) {
      msgErro.textContent = 'Selecione um tamanho.';
      return;
    }
    let qtd = parseInt(quantidadeInput.value);
    if (!qtd || qtd < 1) {
      msgErro.textContent = 'Quantidade inválida.';
      return;
    }

    // Verificar estoque máximo: aqui como exemplo, só garante que tamanho existe na cor.
    // Para controle real de estoque com quantidade, teria que ajustar.

    alert(`Item adicionado:\nProduto: ${produtoDiv.dataset.nome}\nCódigo: ${produtoDiv.dataset.codigo}\nCor: ${corSelecionada}\nTamanho: ${tamanhoSelecionado}\nQuantidade: ${qtd}`);

    // Aqui você adicionaria esse item na lista de compras como no código anterior.

  });
</script>

</body>
</html>
